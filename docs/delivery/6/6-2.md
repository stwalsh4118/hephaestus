# [6-2] Container Types, Constants & Orchestrator Interface

[Back to task list](./tasks.md)

## Description

Define the domain types, status enums, naming convention constants, and the orchestrator interface contract for the Docker orchestration engine. These types will be used by all subsequent tasks.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 06:18:07 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Define `ContainerConfig` struct with fields: Image, Name, Env (map), Ports (map host→container), Volumes (map host→container), Hostname, NetworkName
2. Define `ContainerInfo` struct with fields: ID, Name, Image, Status (ContainerStatus), Ports
3. Define `ContainerStatus` type with constants: `StatusCreated`, `StatusRunning`, `StatusStopped`, `StatusError`, `StatusHealthy`, `StatusUnhealthy`
4. Define container naming convention: prefix `heph-` to all managed container names (constant `ContainerNamePrefix`)
5. Define `Orchestrator` interface with methods:
   - `CreateContainer(ctx, config) (string, error)` — returns container ID
   - `StartContainer(ctx, containerID) error`
   - `StopContainer(ctx, containerID) error`
   - `RemoveContainer(ctx, containerID) error`
   - `ListContainers(ctx) ([]ContainerInfo, error)`
   - `InspectContainer(ctx, containerID) (*ContainerInfo, error)`
   - `CreateNetwork(ctx) error`
   - `RemoveNetwork(ctx) error`
   - `HealthCheck(ctx, containerID) (ContainerStatus, error)`
   - `TeardownAll(ctx) error`
6. Place types in `backend/internal/docker/types.go`
7. Place interface in `backend/internal/docker/orchestrator.go`

## Implementation Plan

1. Create `backend/internal/docker/types.go` with all structs and constants
2. Create `backend/internal/docker/orchestrator.go` with the `Orchestrator` interface
3. Follow existing patterns: exported types, JSON tags where relevant, named constants

## Test Plan

- Verify `go build ./...` compiles without errors
- Verify types are usable: a simple test that instantiates `ContainerConfig` and `ContainerInfo` with valid values
- Verify `ContainerStatus` constants are distinct string values

## Verification

_To be completed during implementation._

## Files Modified

_To be completed during implementation._
