# [9-5] Deploy UI — Toolbar Buttons & Node Status Badges

[Back to task list](./tasks.md)

## Description

Add Deploy and Teardown buttons to the diagram workspace toolbar. Add status indicator badges to canvas nodes that show real-time container status. Display error feedback via toast notifications.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-20 08:04:21 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. **Toolbar Buttons** (in `DiagramWorkspace.tsx`):
   - **Deploy** button: triggers `deployStore.deploy(exportDiagram(nodes, edges))`
     - Disabled when diagram is empty or deployment already in progress
     - Shows "Deploying..." label with spinner while deploying
     - Changes to disabled state once deployed (until teardown)
   - **Teardown** button: triggers `deployStore.teardown()`
     - Only visible/enabled when deployed
     - Confirmation before tearing down (simple `window.confirm` or inline confirmation)
   - Follow existing toolbar styling patterns (alongside Export/Import buttons)
2. **Node Status Badges** (in `ServiceNode.tsx`):
   - Read per-node status from `deployStore.nodeStatuses`
   - Display colour-coded indicator dot on each node:
     - Green: `running` / `healthy`
     - Yellow: `created` (starting)
     - Red: `error` / `unhealthy`
     - Grey: `stopped` / no status
   - Badge position: top-right corner of the node
   - Smooth transition between states (CSS transition on background-color)
3. **Error Feedback**:
   - When `deployStore.error` is set, show a dismissible error banner or toast
   - Keep it simple — a fixed-position notification that auto-dismisses after a few seconds
   - Display the error message text from the backend
4. No external UI libraries — use Tailwind CSS for all styling

## Implementation Plan

- Update `frontend/src/components/canvas/DiagramWorkspace.tsx` — add Deploy/Teardown buttons to toolbar
- Update `frontend/src/components/canvas/nodes/ServiceNode.tsx` — add status badge based on deploy store
- Create `frontend/src/components/ui/ErrorToast.tsx` — simple toast notification component
- Wire deploy store into components via Zustand hooks

## Test Plan

- **Playwright browser verification**:
  - Deploy button renders in toolbar
  - Deploy button disabled when no nodes on canvas
  - Teardown button hidden when not deployed
  - Node status badge renders with correct colour based on mock status
- **Unit tests**:
  - ErrorToast renders message and dismisses

## Verification

_To be completed during implementation._

## Files Modified

_To be completed during implementation._
