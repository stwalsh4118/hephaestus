# 5-5: WebSocket Endpoint Scaffolding

[Back to task list](./tasks.md)

## Description

Scaffold a WebSocket endpoint at `/ws/status` that accepts connections and handles ping/pong. No business logic â€” this is the foundation for real-time status updates in later PBIs (9, 11). Requires an external WebSocket library since Go's stdlib doesn't include WebSocket support.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 04:38:28 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. WebSocket endpoint at `/ws/status` upgrades HTTP connections to WebSocket
2. Accepts connections from allowed CORS origin
3. Handles WebSocket ping/pong (keep-alive)
4. Logs connection open/close events
5. Gracefully closes connections on server shutdown
6. No message processing business logic (scaffold only)
7. Route registered in `main.go`

## Implementation Plan

**External Packages**: This task requires research and a guide document for: `gorilla/websocket`

1. Research `gorilla/websocket` package, create `5-5-gorilla-websocket-guide.md`
2. Create `backend/internal/handler/websocket.go` with WebSocket upgrade and connection handler
3. Update `backend/cmd/server/main.go` to register `/ws/status` route
4. Write test in `backend/internal/handler/websocket_test.go`
5. Update backend API spec with WebSocket endpoint documentation

## Test Plan

- HTTP request to `/ws/status` upgrades to WebSocket connection
- Connected client can send ping and receive pong
- Connection closes gracefully
- Non-WebSocket GET to `/ws/status` returns appropriate error

## Verification

_To be completed during implementation._

## Files Modified

_To be completed during implementation._
